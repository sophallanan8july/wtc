<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skin Care | Auth</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
      .auth-section { max-width: 400px; margin: 50px auto 30px; background: #fff; padding: 24px; border-radius: 10px; box-shadow: 0 2px 12px rgba(0,0,0,0.08);}
      .auth-section h2 { margin-bottom: 18px;}
      .auth-section form { margin-bottom: 10px;}
      .auth-section input { width: 100%; margin: 10px 0; padding: 10px; border: 1px solid #ddd; border-radius: 5px;}
      .auth-section button { padding: 10px 20px; background: #4CAF50; color: #fff; border: none; border-radius: 6px; font-weight: bold; cursor: pointer;}
      .auth-section a { color: #2b49c2; text-decoration: none; }
      .auth-section a:hover { text-decoration: underline; }
      .auth-section .logout-btn { background: #e74c3c; }
    </style>
</head>
<body>
<section id="header">
    <a href="#"><img src="./img/logo.png" class="logo" alt="Logo"></a>
    <div>
        <ul id="navbar">
            <li><a href="index.html">Home</a></li>
            <li><a href="product.html">Products</a></li>
            <li><a href="order.html">Order</a></li>
            <li><a href="cart.html"><i class="fas fa-shopping-cart"></i></a></li>
            <li><a class="active" href="auth.html"><i class="fas fa-user"></i></a></li>
        </ul>
    </div>
</section>

<!-- LOGIN SECTION -->
<section id="login-section" class="auth-section">
  <h2>Login</h2>
  <form id="login-form">
    <input type="email" id="login-email" placeholder="Email" required />
    <input type="password" id="login-password" placeholder="Password" required />
    <button type="submit">Login</button>
  </form>
  <p>Don't have an account? <a href="#" onclick="showSection('register-section')">Register</a></p>
</section>

<!-- REGISTER SECTION -->
<section id="register-section" class="auth-section" style="display:none;">
  <h2>Register</h2>
  <form id="register-form">
    <input type="text" id="register-name" placeholder="Name" required />
    <input type="email" id="register-email" placeholder="Email" required />
    <input type="password" id="register-password" placeholder="Password" required />
    <button type="submit">Register</button>
  </form>
  <p>Already have an account? <a href="#" onclick="showSection('login-section')">Login</a></p>
</section>

<!-- DASHBOARD SECTION -->
<section id="dashboard-section" class="auth-section" style="display:none;">
  <h2>Welcome, <span id="dashboard-username"></span>!</h2>
  <p><a href="order.html">View Order History</a></p>
  <button class="logout-btn" onclick="logout()">Logout</button>
</section>

<footer>
    <hr>
    <p>&copy; 2025 Skin Care. All rights reserved by Nan Sophalla.</p>
</footer>

<script>
function showSection(id) {
  document.getElementById('login-section').style.display = 'none';
  document.getElementById('register-section').style.display = 'none';
  document.getElementById('dashboard-section').style.display = 'none';
  document.getElementById(id).style.display = '';
}

document.addEventListener("DOMContentLoaded", function() {
  const user = JSON.parse(localStorage.getItem("loggedInUser"));
  if (user) {
    showSection('dashboard-section');
    document.getElementById('dashboard-username').innerText = user.name;
  } else {
    showSection('login-section');
  }
});

document.getElementById("register-form").addEventListener("submit", function(e){
  e.preventDefault();
  const name = document.getElementById("register-name").value;
  const email = document.getElementById("register-email").value;
  const password = document.getElementById("register-password").value;
  const users = JSON.parse(localStorage.getItem("users")) || [];
  if (users.find(u => u.email === email)) {
    alert("Email already registered");
    return;
  }
  const id = Date.now().toString() + Math.floor(Math.random()*1000); //Create a unique ID and saved in local storage as array
  users.push({ id, name, email, password });
  localStorage.setItem("users", JSON.stringify(users));
  alert("Registered successfully! Please log in.");
  showSection('login-section');
});

document.getElementById("login-form").addEventListener("submit", function(e){
  e.preventDefault();
  const email = document.getElementById("login-email").value;
  const password = document.getElementById("login-password").value;
  const users = JSON.parse(localStorage.getItem("users")) || [];
  const user = users.find(u => u.email === email && u.password === password);
  if (user) {
    localStorage.setItem("loggedInUser", JSON.stringify(user));
    showSection('dashboard-section');
    document.getElementById('dashboard-username').innerText = user.name;
  } else {
    alert("Invalid email or password");
  }
});

function logout() {
  localStorage.removeItem("loggedInUser");
  showSection('login-section');
}
</script>
</body>
</html>
